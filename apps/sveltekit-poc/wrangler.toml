# Cloudflare Workers configuration (matches working local deployment)
name = "rite-sveltekit"
main = ".svelte-kit/cloudflare/_worker.js"
assets = { directory = ".svelte-kit/cloudflare", binding = "ASSETS" }
compatibility_date = "2025-01-27"
compatibility_flags = ["nodejs_compat"]
workers_dev = true

# Build configuration that runs before wrangler versions upload
[build]
command = "pnpm --filter=sveltekit-poc run build"
cwd = "../.."

# Environment variables
[vars]
VITE_CONVEX_URL = "https://valiant-curlew-94.convex.cloud"
INSTAGRAM_OAUTH_PROXY_URL = "https://rite-instagram-oauth-proxy.sehyunchung.workers.dev"
NODE_ENV = "production"